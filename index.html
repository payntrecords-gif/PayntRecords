<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>PAYNT — Holy drill</title>
  <meta name="description" content="PAYNT — holy drill z Prahy. Rap s Bohem: vážně i s nadhledem. Můj standard je Písmo." />
  <meta name="robots" content="index,follow" />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#05050a" />
  <link rel="canonical" href="https://payntrecords-gif.github.io/PayntRecords/" />

  <!-- Preload hero image (rychlejší LCP) -->
  <link rel="preload" as="image" href="./paynt.jpg" fetchpriority="high" />

  <!-- Open Graph -->
  <meta property="og:site_name" content="PAYNT" />
  <meta property="og:title" content="PAYNT — Holy drill" />
  <meta property="og:description" content="Rap s Bohem. Vážně i s nadhledem. Můj standard je Písmo." />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="cs_CZ" />
  <meta property="og:url" content="https://payntrecords-gif.github.io/PayntRecords/" />
  <meta property="og:image" content="https://payntrecords-gif.github.io/PayntRecords/paynt.jpg" />
  <meta property="og:image:alt" content="Paynt u mixpultu" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="PAYNT — Holy drill" />
  <meta name="twitter:description" content="Rap s Bohem. Vážně i s nadhledem. Můj standard je Písmo." />
  <meta name="twitter:image" content="https://payntrecords-gif.github.io/PayntRecords/paynt.jpg" />

  <link rel="preconnect" href="https://fonts.bunny.net">
  <link href="https://fonts.bunny.net/css?family=syne:400,700,800|jetbrains-mono:400,600" rel="stylesheet" />

  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Person",
    "name":"PAYNT",
    "url":"https://payntrecords-gif.github.io/PayntRecords/",
    "sameAs":[
      "https://www.instagram.com/paynt__/",
      "https://www.youtube.com/@PayntRecords"
    ]
  }
  </script>

  <style>
    :root{
      --bg:#05050a;
      --surface:#0d0d14;
      --text:#f2f2f2;
      --muted:rgba(242,242,242,.62);

      --accent:#00f5ff;
      --accent2:#ff2bd6;

      --border:rgba(255,255,255,.14);
      --border2:rgba(255,255,255,.08);
      --shadow:0 18px 60px rgba(0,0,0,.55);

      --radius:22px;

      /* spotlight default */
      --mx: 50vw;
      --my: 30vh;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      background:var(--bg);
      color:var(--text);
      font-family:Syne, system-ui, -apple-system, Segoe UI, sans-serif;
      overflow-x:hidden;
      cursor:crosshair;
    }
    a{color:inherit;text-decoration:none}

    /* A11y */
    .skip{
      position:absolute; left:-9999px; top:10px;
      padding:.7rem 1rem;
      border-radius:999px;
      background:linear-gradient(135deg, var(--accent), var(--accent2));
      color:#000;
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      z-index:999;
    }
    .skip:focus{left:12px}
    :focus-visible{outline:2px solid var(--accent); outline-offset:3px; border-radius:10px}

    /* Scrollbar */
    ::-webkit-scrollbar{width:8px}
    ::-webkit-scrollbar-track{background:#070711}
    ::-webkit-scrollbar-thumb{background:linear-gradient(180deg, var(--accent), var(--accent2))}

    /* Selection */
    ::selection{ background: rgba(0,245,255,.25); color: var(--text); }

    /* Header */
    header{
      position:fixed;
      top:18px; left:18px; right:18px;
      z-index:60;
      display:flex;
      align-items:center;
      justify-content:space-between;
      mix-blend-mode:exclusion;
    }
    .logo{
      font-weight:800;
      letter-spacing:-1px;
      text-transform:uppercase;
      font-size:1.45rem;
      user-select:none;
    }
    nav{
      display:flex;
      gap:1.4rem;
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size:.8rem;
      align-items:center;
    }
    nav a{
      color:rgba(255,255,255,.9);
      position:relative;
      padding:.15rem .1rem;
    }
    nav a:hover{color:var(--accent); text-decoration:line-through}
    nav a.active{
      color:var(--accent);
      text-decoration:none;
    }
    nav a.active::after{
      content:"";
      position:absolute;
      left:0; right:0; bottom:-.25rem;
      height:2px;
      border-radius:999px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      opacity:.9;
    }

    /* Spotlight overlay (desktop only) */
    .spotlight{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:5;
      opacity:0;
    }
    @media (pointer:fine) and (prefers-reduced-motion: no-preference){
      .spotlight{
        opacity:1;
        background:
          radial-gradient(600px circle at var(--mx) var(--my),
            rgba(0,245,255,.10),
            rgba(255,43,214,.05) 40%,
            transparent 70%);
        mix-blend-mode: screen;
      }
    }

    /* Hero */
    .hero{
      min-height:100vh;
      display:grid;
      grid-template-columns:1.15fr .85fr;
      gap:3.2rem;
      align-items:center;
      padding:0 4vw;
      position:relative;
      z-index:10;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:-90px;
      background:
        radial-gradient(circle at 20% 25%, rgba(0,245,255,.18) 0, transparent 45%),
        radial-gradient(circle at 85% 70%, rgba(255,43,214,.10) 0, transparent 55%),
        radial-gradient(circle at 50% 0%, rgba(255,255,255,.05) 0, transparent 55%);
      filter:blur(18px);
      opacity:.95;
      pointer-events:none;
    }

    .hero-text{position:relative; z-index:2}

    .micro{
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size:.78rem;
      letter-spacing:.14em;
      text-transform:uppercase;
      color:rgba(255,255,255,.6);
      margin-bottom:1rem;
    }
    .micro b{color:var(--accent); font-weight:600}

    .hero-text h1{
      font-size:clamp(3.1rem, 9.7vw, 7.6rem);
      line-height:.9;
      text-transform:uppercase;
      font-weight:800;
      letter-spacing:-0.03em;
      margin-bottom:1rem;
    }

    .hero-text .ghost{
      display:block;
      color:rgba(242,242,242,.16);
      transition: transform .25s ease, color .25s ease, letter-spacing .25s ease;
    }
    .hero-text .ghost:hover{
      color:var(--accent);
      transform: translateX(8px) skewX(-10deg);
      letter-spacing: 0.01em;
    }
    .hero-text .solid{
      display:block;
      color:var(--text);
      text-shadow: 0 14px 60px rgba(0,245,255,.08);
    }
    .solid .hl{
      color:var(--accent);
      text-shadow: 0 20px 70px rgba(0,245,255,.18);
    }

    .sub{
      margin-top:1.2rem;
      max-width:620px;
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size:.92rem;
      line-height:1.65;
      color:rgba(255,255,255,.72);
      border-left:2px solid var(--accent);
      padding-left:1rem;
    }

    .cta{
      margin-top:1.35rem;
      display:flex;
      gap:.8rem;
      flex-wrap:wrap;
      align-items:center;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:.85rem 1.35rem;
      border-radius:999px;
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size:.82rem;
      text-transform:uppercase;
      letter-spacing:.06em;
      border:1px solid var(--border);
      transition: transform .2s ease, background .2s ease, border-color .2s ease, color .2s ease;
      cursor:pointer;
      background:transparent;
      color:rgba(255,255,255,.92);
      position:relative;
      overflow:hidden;
    }
    .btn:hover{transform: translateY(-2px); border-color:rgba(255,255,255,.32)}
    .btn-primary{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color:#000;
      border-color: transparent;
      box-shadow: 0 18px 55px rgba(0,245,255,.10);
    }

    /* Button shine */
    @media (prefers-reduced-motion: no-preference){
      .btn::after{
        content:"";
        position:absolute;
        inset:-40%;
        background:linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
        transform:translateX(-60%) rotate(12deg);
        transition:transform 650ms ease;
        pointer-events:none;
      }
      .btn:hover::after{ transform:translateX(60%) rotate(12deg); }
    }

    /* Photo */
    .photo{
      position:relative;
      width:100%;
      height:78vh;
      min-height:520px;
      border:1px solid var(--border2);
      border-radius:var(--radius);
      overflow:hidden;
      background:#0b0b14;
      box-shadow: var(--shadow);
      z-index:2;
    }
    .photo img{
      width:100%;
      height:100%;
      object-fit:cover;
      filter: grayscale(100%) contrast(1.15) brightness(0.95);
      transform: scale(1.03);
      transition: transform .55s ease, filter .55s ease;
      display:block;
    }
    .photo::before,
    .photo::after{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
    }
    .photo::before{
      background:
        radial-gradient(circle at 15% 20%, rgba(0,245,255,.70) 0, transparent 55%),
        radial-gradient(circle at 80% 70%, rgba(255,43,214,.42) 0, transparent 60%),
        linear-gradient(135deg, rgba(0,245,255,.16), rgba(255,43,214,.08));
      mix-blend-mode: multiply;
      opacity: .92;
    }
    .photo::after{
      background-image:
        repeating-linear-gradient(
          0deg,
          rgba(255,255,255,0.05),
          rgba(255,255,255,0.05) 1px,
          transparent 1px,
          transparent 3px
        );
      mix-blend-mode: overlay;
      opacity:.12;
    }
    .photo:hover img{
      filter: grayscale(0%) contrast(1.05) brightness(1.02);
      transform: scale(1.06);
    }
    .photo:hover{
      box-shadow: 12px 12px 0 var(--accent), var(--shadow);
    }
    .photo-badge{
      position:absolute;
      left:14px;
      top:14px;
      padding:.5rem .7rem;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.35);
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size:.74rem;
      color: rgba(255,255,255,.85);
      backdrop-filter: blur(10px);
    }

    /* Sections */
    section{
      padding:10vh 4vw;
      border-top:1px solid var(--border2);
      position:relative;
      z-index:10;
    }
    .section-title{
      font-size:2.8rem;
      text-transform:uppercase;
      margin-bottom:2.0rem;
      color:var(--accent);
      letter-spacing:-0.02em;
    }

    /* content-visibility for below-the-fold sections */
    .cv{
      content-visibility:auto;
      contain-intrinsic-size: 900px;
    }

    /* Video cards */
    .video{
      background: var(--surface);
      border:1px solid var(--border2);
      border-radius:18px;
      overflow:hidden;
      transition: transform .25s ease, border-color .25s ease;
    }
    .video:hover{ transform: translateY(-6px); border-color: rgba(0,245,255,.55); }
    .frame{ aspect-ratio:16/9; width:100%; display:block; background:#000; }
    .video iframe{ width:100%; height:100%; border:0; display:block; }

    .cap{
      padding:.95rem 1.05rem 1.05rem;
      border-top:1px solid var(--border2);
    }
    .cap .name{
      font-weight:800;
      text-transform:uppercase;
      letter-spacing:-0.01em;
      font-size:1.05rem;
      margin-bottom:.35rem;
      color:rgba(255,255,255,.95);
    }
    .cap .meta{
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size:.78rem;
      color:rgba(255,255,255,.55);
    }
    .featured{ box-shadow: 0 22px 90px rgba(0,245,255,.06); }
    .featured .cap{
      background: linear-gradient(135deg, rgba(0,245,255,.08), rgba(255,43,214,.05));
    }
    .featured .name{ font-size:1.18rem }
    .grid-3{
      margin-top:1.2rem;
      display:grid;
      grid-template-columns:repeat(3, minmax(0,1fr));
      gap:1.2rem;
    }

    /* Text sections */
    .truth{ border-top:none; background:#070711; }
    .truth .section-title{ color:var(--text); }
    .truth-box{
      max-width: 980px;
      border: 1px solid var(--border2);
      border-radius: var(--radius);
      padding: 2rem 2.1rem;
      background: rgba(255,255,255,.03);
      box-shadow: 0 18px 70px rgba(0,0,0,.35);
    }
    .truth h3{
      font-size: clamp(1.6rem, 3.6vw, 2.4rem);
      line-height:1.1;
      text-transform: uppercase;
      margin: 1.3rem 0 .7rem;
      font-weight:800;
      letter-spacing:-0.02em;
    }
    .truth h3:first-of-type{ margin-top:0; }
    .truth p{
      font-size: 1.05rem;
      line-height: 1.78;
      margin-bottom: 1rem;
      color: rgba(255,255,255,.78);
      font-weight: 600;
    }
    .truth p b{ color:var(--accent); font-weight:700; }

    .dm{
      display:inline-flex;
      margin-top: 1.2rem;
      padding: .95rem 1.3rem;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color:#000;
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      text-transform:uppercase;
      letter-spacing:.06em;
      border:none;
      transition: transform .2s ease;
    }
    .dm:hover{ transform: translateY(-2px); }

    .small{
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size:.86rem;
      opacity:.72;
      margin-top:1rem;
    }

    footer{
      padding:3rem 4vw;
      border-top:1px solid var(--border2);
      display:flex;
      justify-content:space-between;
      gap:1rem;
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size:.82rem;
      color: rgba(255,255,255,.5);
      flex-wrap:wrap;
      position:relative;
      z-index:10;
    }

    /* Scroll reveal */
    .reveal{
      opacity:0;
      transform: translateY(18px);
      transition: opacity 700ms ease, transform 700ms ease;
      will-change: opacity, transform;
    }
    .reveal.is-in{ opacity:1; transform:none; }

    /* Hero drift */
    @media (prefers-reduced-motion: no-preference){
      .hero::before{ animation: drift 14s ease-in-out infinite alternate; transform-origin: 50% 50%; }
      @keyframes drift{
        0%{ transform: translate3d(-1.5%,-1%,0) scale(1.02); filter: blur(18px); }
        100%{ transform: translate3d(1.5%,1%,0) scale(1.06); filter: blur(20px); }
      }
    }

    @media (prefers-reduced-motion: reduce){
      .reveal{ opacity:1; transform:none; transition:none; }
      .btn, .photo img, .video{ transition:none; }
      html{ scroll-behavior:auto; }
      .spotlight{ display:none; }
    }

    @media (max-width: 980px){
      .hero{ grid-template-columns:1fr; padding-top:110px }
      .photo{ height:52vh; min-height:360px }
      header{ top:10px; left:10px; right:10px }
      .grid-3{ grid-template-columns:1fr; gap:1rem; }
    }

    /* Back to top */
    .totop{
      position:fixed;
      right:16px;
      bottom:16px;
      z-index:80;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:.55rem;
      padding:.75rem 1rem;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      color: rgba(255,255,255,.88);
      font-family:"JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, monospace;
      font-size:.78rem;
      letter-spacing:.06em;
      text-transform:uppercase;
      cursor:pointer;
      transform: translateY(18px);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease, transform .25s ease, border-color .25s ease;
    }
    .totop:hover{ border-color: rgba(0,245,255,.55); }
    .totop.show{
      opacity:1;
      transform: translateY(0);
      pointer-events:auto;
    }
  </style>
</head>

<body>
  <a class="skip" href="#hudba">Přeskočit na obsah</a>

  <header>
    <div class="logo">PAYNT</div>
    <nav aria-label="Hlavní navigace" id="nav">
      <a href="#hudba" data-spy>HUDBA</a>
      <a href="#pribeh" data-spy>PŘÍBĚH</a>
      <a href="#slovo" data-spy>SLOVO</a>
      <a href="https://www.youtube.com/@PayntRecords" target="_blank" rel="noopener noreferrer">YT</a>
    </nav>
  </header>

  <div class="spotlight" aria-hidden="true"></div>

  <main>
    <section class="hero reveal" id="top" aria-label="Úvod">
      <div class="hero-text">
        <div class="micro"><b>HOLY DRILL</b> • Praha • PAYNT</div>

        <h1>
          <span class="ghost">RAP S</span>
          <span class="ghost">BOHEM</span>
          <span class="solid">JE <span class="hl">COOL.</span></span>
        </h1>

        <div class="sub">
          Rap beru vážně. A zároveň si u něj nechávám nadhled.<br>
          Nechci žít podle nálady. Můj standard je Písmo.
        </div>

        <div class="cta">
          <button class="btn btn-primary" type="button" onclick="location.href='#hudba'">Pusť poslední věci</button>
          <a class="btn" href="#pribeh">Můj příběh</a>
        </div>
      </div>

      <div class="photo" aria-label="Fotka">
        <div class="photo-badge">LIVE / MIX / REAL</div>
        <img
          src="./paynt.jpg"
          width="1184"
          height="864"
          alt="Paynt u mixpultu"
          loading="eager"
          decoding="async"
          fetchpriority="high" />
      </div>
    </section>

    <section id="hudba" class="reveal cv" aria-label="Hudba">
      <h2 class="section-title">Hudba</h2>
      <div class="small" style="margin-top:-.8rem; margin-bottom:1.2rem;">
        Čerstvý uploady z kanálu. Bez hledání. Jen play.
      </div>

      <div id="latest-wrap">
        <!-- Fallback: playlist uploadů -->
        <article class="video featured">
          <div class="frame">
            <iframe
              loading="lazy"
              src="https://www.youtube-nocookie.com/embed/videoseries?list=UUOp4T-ZmZP_b9JQQEw1YM3w"
              title="PAYNT — nejnovější uploady"
              referrerpolicy="strict-origin-when-cross-origin"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
          </div>
          <div class="cap">
            <div class="name">Nejnovější z kanálu</div>
            <div class="meta">// fallback</div>
          </div>
        </article>
      </div>
    </section>

    <section class="truth reveal cv" id="pribeh" aria-label="Příběh">
      <h2 class="section-title">Příběh</h2>

      <div class="truth-box">
        <h3>Jaký jsem byl</h3>
        <p>
          Dřív jsem byl fakt nenaplněnej. Pesimistickej. Žádnej směr.
          V hlavě mi jely otázky a strachy a upřímně… často jsem nevěděl, proč vůbec vstávat.
        </p>
        <p>
          Nedokázal jsem být sám sebou. Emoce jsem měl jako kdyby zamknutý.
          Byl jsem introvert a kamkoli jsem přišel, cítil jsem se napnutej — jako kdyby se každou chvíli mělo něco pokazit.
          Nejvíc mě svazovalo, co si o mně myslí lidi.
        </p>

        <h3>Co se zlomilo</h3>
        <p>
          Zlomilo se to skrze Boží Slovo. Ne tak, že by ze dne na den zmizely všechny problémy.
          Ale změnilo se to, na čem stojím. Přestal jsem být rukojmí toho, co zrovna cítím,
          a toho, co se zrovna říká okolo.
        </p>

        <h3>Proč to dávám do rapu</h3>
        <p>
          Protože chci, aby to bylo slyšet normálně — živě, někdy vtipně.
          Je v tom recese a nadsázka: občas to přestřelím schválně a ne všechno ber doslova.
          Ale to hlavní myslím vážně.
        </p>

        <h3>Můj standard</h3>
        <p>
          Nechci, aby mě vedli lidi, emoce nebo myšlenky, co se mění podle tlaku a nálady.
          Pro mě je standard Písmo — Bible. Když je všude šum, držím se Slova.
        </p>

        <a class="dm" href="https://www.instagram.com/paynt__/" target="_blank" rel="noopener noreferrer">Ozvi se na IG</a>
        <div class="small">Klidně otázka, klidně nesouhlas. V pohodě oboje.</div>
      </div>
    </section>

    <section class="truth reveal cv" id="slovo" aria-label="Slovo">
      <h2 class="section-title">Slovo</h2>

      <div class="truth-box">
        <h3>Co tím vlastně myslím</h3>
        <p>
          Nechci z toho dělat “náboženskou pózu”. Spíš naopak:
          mám rád věci, co jsou pravdivý, jednoduchý a drží i ve chvíli, kdy se člověk necítí silnej.
        </p>

        <h3>Proč nejdu podle pocitů</h3>
        <p>
          Pocity jsou reálný, ale nejsou stabilní. Někdy jsi nahoře, někdy dole.
          A když to vezmeš podle toho, jak se zrovna cítíš, tak tě to jednou vystřelí a podruhý zlomí.
          Já se učím vracet k tomu, co je pevný.
        </p>

        <h3>Hudba, humor a váha věcí</h3>
        <p>
          V trackách občas zní, že je to “jen sranda”.
          A je. Protože humor je někdy nejlepší způsob, jak přežít tlak.
          Ale zároveň se přes to snažím ukázat, že na směru záleží — že existuje pravda, která není jen “můj názor”.
        </p>

        <div class="cta">
          <a class="btn btn-primary" href="#hudba">Pustit hudbu</a>
          <a class="btn" href="https://www.youtube.com/@PayntRecords/videos" target="_blank" rel="noopener noreferrer">Všechna videa</a>
        </div>

        <div class="small">Pokud chceš jen poslech, úplně chápu. Pokud chceš řešit víc, taky v pohodě.</div>
      </div>
    </section>
  </main>

  <footer class="cv">
    <div>© <span id="year"></span> PAYNT</div>
    <div>YouTube: @PayntRecords • Instagram: @paynt__</div>
  </footer>

  <button class="totop" id="totop" type="button" aria-label="Zpět nahoru">NAHORU</button>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    // Spotlight (desktop mouse)
    (function () {
      const root = document.documentElement;
      let raf = null;
      let lastX = 0, lastY = 0;

      function update() {
        raf = null;
        root.style.setProperty("--mx", lastX + "px");
        root.style.setProperty("--my", lastY + "px");
      }

      window.addEventListener("mousemove", (e) => {
        lastX = e.clientX;
        lastY = e.clientY;
        if (!raf) raf = requestAnimationFrame(update);
      }, { passive: true });
    })();

    // Scroll reveal
    let io = null;
    function setupRevealObserver() {
      if (!("IntersectionObserver" in window)) return;
      io = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            e.target.classList.add("is-in");
            io.unobserve(e.target);
          }
        });
      }, { threshold: 0.12 });
    }

    function observeReveals(root = document) {
      const els = root.querySelectorAll(".reveal:not(.is-in)");
      if (!els.length) return;

      if ("IntersectionObserver" in window) {
        if (!io) setupRevealObserver();
        els.forEach(el => io.observe(el));
      } else {
        els.forEach(el => el.classList.add("is-in"));
      }
    }

    observeReveals();

    // Scrollspy (aktivní položka v menu)
    (function () {
      const nav = document.getElementById("nav");
      if (!nav || !("IntersectionObserver" in window)) return;

      const links = Array.from(nav.querySelectorAll("a[data-spy]"));
      const targets = links
        .map(a => document.querySelector(a.getAttribute("href")))
        .filter(Boolean);

      function setActive(id) {
        links.forEach(a => {
          const active = a.getAttribute("href") === "#" + id;
          a.classList.toggle("active", active);
          if (active) a.setAttribute("aria-current", "page");
          else a.removeAttribute("aria-current");
        });
      }

      const spy = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting && entry.target?.id) setActive(entry.target.id);
        });
      }, { rootMargin: "-45% 0% -55% 0%", threshold: 0.01 });

      targets.forEach(t => spy.observe(t));

      // default
      setActive("hudba");
    })();

    // Back to top
    (function () {
      const btn = document.getElementById("totop");
      const toggle = () => {
        const show = (window.scrollY || document.documentElement.scrollTop) > 700;
        btn.classList.toggle("show", show);
      };

      btn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      window.addEventListener("scroll", toggle, { passive: true });
      toggle();
    })();

    // 4 nejnovější videa z latest.json
    async function loadLatest() {
      const wrap = document.getElementById("latest-wrap");
      try {
        const res = await fetch("./latest.json", { cache: "no-store" });
        if (!res.ok) return;

        const data = await res.json();
        if (!data?.items?.length) return;

        const items = data.items.slice(0, 4);
        const featured = items[0];
        const rest = items.slice(1);

        const escapeHtml = (s) =>
          String(s || "").replace(/[&<>"']/g, (m) => ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[m]));

        const videoCard = (v, cls="", meta="") => `
          <article class="video ${cls}">
            <div class="frame">
              <iframe
                loading="lazy"
                src="https://www.youtube-nocookie.com/embed/${encodeURIComponent(v.id)}?rel=0"
                title="${escapeHtml(v.title)}"
                referrerpolicy="strict-origin-when-cross-origin"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
            </div>
            <div class="cap">
              <div class="name">${escapeHtml(v.title)}</div>
              <div class="meta">${escapeHtml(meta)}</div>
            </div>
          </article>
        `;

        const featuredMeta = featured.published ? `// nejnovější • ${featured.published.slice(0,10)}` : `// nejnovější`;
        const html = `
          ${videoCard(featured, "featured reveal", featuredMeta)}
          <div class="grid-3" aria-label="Další nejnovější videa">
            ${rest.map(v => videoCard(v, "reveal", v.published ? `// ${v.published.slice(0,10)}` : `//`)).join("")}
          </div>
        `;

        wrap.innerHTML = html;
        observeReveals(wrap);
      } catch (e) {
        // zůstane fallback
      }
    }

    loadLatest();
  </script>
</body>
</html>
